# 联通运营商后台管理系统项目规则文档

## 1. 项目概述

### 1.1 项目背景
本项目采用前后端分离架构，通过两个Trae对话框分别进行前后端开发，以支持后期高效协作。为确保开发流程规范、协作高效，特制定本套项目规则。

### 1.2 项目架构
- **前端技术栈**：Vue3 + TypeScript + Pinia + Vue Router + Element Plus + pnpm
- **后端技术栈**：Spring Boot 3.0 + MySQL 8.0 + MyBatis-Plus + Redis + RabbitMQ
- **部署架构**：Docker + Kubernetes + Nginx

### 1.3 项目目录结构
```
联通运营商后台管理系统/
├── 前端项目/                    # 前端代码目录
│   ├── src/                    # 源代码目录
│   │   ├── components/         # 公共组件
│   │   ├── views/              # 页面组件
│   │   ├── store/              # 状态管理
│   │   ├── router/             # 路由配置
│   │   ├── api/                # API接口
│   │   ├── utils/              # 工具函数
│   │   └── assets/             # 静态资源
│   ├── public/                 # 公共资源
│   ├── package.json            # 依赖配置
│   └── vite.config.ts          # 构建配置
├── 后端项目/                    # 后端代码目录
│   ├── src/                    # 源代码目录
│   │   ├── main/java/          # Java源代码
│   │   │   └── com/unicom/     # 项目包结构
│   │   │       ├── controller/ # 控制器层
│   │   │       ├── service/    # 服务层
│   │   │       ├── repository/ # 数据访问层
│   │   │       ├── model/      # 数据模型
│   │   │       ├── config/     # 配置类
│   │   │       └── utils/      # 工具类
│   │   └── main/resources/     # 资源文件
│   │       ├── application.yml # 应用配置
│   │       ├── mapper/         # MyBatis映射文件
│   │       └── static/         # 静态资源
│   ├── pom.xml                 # Maven配置
│   └── Dockerfile              # Docker配置
├── 文档/                       # 项目文档
│   ├── 需求设计文档.md
│   ├── 接口文档.md
│   ├── 数据库设计.md
│   └── 部署文档.md
└── 项目规则/                   # 项目规则文档
    ├── 项目规则文档.md
    ├── 前后端接口规范.md
    ├── 项目目录结构规范.md
    ├── 代码规范.md
    └── Git协作流程规范.md
```

## 2. 前后端协作规范

### 2.1 协作流程
1. **需求分析阶段**：前后端共同参与需求分析，明确功能边界和技术实现方案
2. **接口设计阶段**：后端先设计API接口，前端确认接口设计是否符合需求
3. **并行开发阶段**：前后端根据接口文档并行开发，通过Mock数据进行开发测试
4. **联调测试阶段**：前后端进行接口联调，解决数据交互问题
5. **集成测试阶段**：进行系统集成测试，确保整体功能正常
6. **部署上线阶段**：前后端协同进行部署上线

### 2.2 协作工具
- **接口文档工具**：使用Swagger/OpenAPI生成和维护接口文档
- **版本控制工具**：使用Git进行代码版本控制
- **项目管理工具**：使用Jira进行任务管理和进度跟踪
- **沟通工具**：使用企业微信/钉钉进行日常沟通
- **文档协作工具**：使用Confluence进行文档协作

### 2.3 协作机制
- **每日站会**：前后端开发人员每天进行简短站会，同步进度和问题
- **周度回顾**：每周进行一次回顾会议，总结本周工作和解决问题
- **接口评审**：重要接口设计需要前后端共同评审
- **代码审查**：前后端代码需要交叉审查，确保代码质量

## 3. 前后端接口规范

### 3.1 接口设计原则
- **RESTful风格**：遵循RESTful API设计风格
- **统一响应格式**：所有接口采用统一的响应格式
- **版本控制**：接口需要进行版本控制，如/api/v1/
- **安全认证**：所有接口需要进行安全认证
- **错误处理**：统一的错误处理机制

### 3.2 接口命名规范
- **资源命名**：使用名词复数形式，如/users、/plans
- **HTTP方法**：
  - GET：获取资源
  - POST：创建资源
  - PUT：更新整个资源
  - PATCH：部分更新资源
  - DELETE：删除资源
- **URL层级**：资源之间的层级关系通过URL体现，如/users/{userId}/plans

### 3.3 请求响应规范
- **请求头**：
  - Content-Type: application/json
  - Authorization: Bearer {token}
  - X-Requested-With: XMLHttpRequest
- **响应格式**：
  ```json
  {
    "code": 200,
    "message": "操作成功",
    "data": {},
    "timestamp": "2023-11-15T10:30:00Z"
  }
  ```
- **错误响应**：
  ```json
  {
    "code": 400,
    "message": "请求参数错误",
    "error": "详细错误信息",
    "timestamp": "2023-11-15T10:30:00Z"
  }
  ```

### 3.4 数据传输规范
- **数据格式**：统一使用JSON格式
- **命名规范**：使用驼峰命名法（前端）和下划线命名法（后端）
- **日期格式**：使用ISO 8601格式，如2023-11-15T10:30:00Z
- **分页参数**：
  - page: 页码，从1开始
  - size: 每页大小
  - sort: 排序字段
  - order: 排序方向（asc/desc）

## 4. 开发环境规范

### 4.1 开发工具
- **前端IDE**：VSCode + Vue Language Features (Volar)
- **后端IDE**：IntelliJ IDEA
- **数据库工具**：Navicat/DataGrip
- **API测试工具**：Postman/Insomnia
- **版本控制工具**：Git + SourceTree/GitKraken

### 4.2 环境配置
- **Node.js版本**：18.x或以上
- **Java版本**：21或以上
- **Maven版本**：3.8.x或以上
- **MySQL版本**：8.0或以上
- **Redis版本**：6.x或以上

### 4.3 开发规范
- **编码规范**：遵循统一的编码规范（详见代码规范文档）
- **注释规范**：关键逻辑需要添加中文注释
- **提交规范**：遵循统一的Git提交规范（详见Git协作流程规范）
- **分支规范**：遵循统一的分支管理规范

## 5. 测试规范

### 5.1 测试策略
- **单元测试**：前后端都需要编写单元测试
- **集成测试**：关键业务流程需要进行集成测试
- **接口测试**：所有接口需要进行接口测试
- **端到端测试**：核心功能需要进行端到端测试

### 5.2 测试工具
- **前端测试**：Vue Test Utils + Jest + Cypress
- **后端测试**：JUnit + Mockito + Postman/Newman
- **性能测试**：JMeter/Gatling
- **安全测试**：OWASP ZAP

### 5.3 测试流程
1. **测试计划**：制定测试计划和测试用例
2. **测试环境**：准备独立的测试环境
3. **测试执行**：按照测试用例执行测试
4. **缺陷管理**：记录和跟踪测试中发现的缺陷
5. **测试报告**：编写测试报告，总结测试结果

## 6. 部署规范

### 6.1 部署策略
- **环境隔离**：开发、测试、预生产、生产环境隔离
- **容器化部署**：使用Docker进行应用容器化
- **自动化部署**：使用CI/CD工具实现自动化部署
- **灰度发布**：关键功能采用灰度发布策略

### 6.2 部署流程
1. **代码提交**：开发人员提交代码到版本库
2. **自动构建**：CI工具自动构建应用
3. **自动测试**：自动执行单元测试和集成测试
4. **部署测试环境**：自动部署到测试环境
5. **人工测试**：测试人员进行人工测试
6. **部署生产环境**：测试通过后部署到生产环境

### 6.3 监控告警
- **应用监控**：监控应用性能和错误率
- **系统监控**：监控系统资源使用情况
- **业务监控**：监控关键业务指标
- **告警机制**：设置合理的告警阈值和通知机制

## 7. 项目管理规范

### 7.1 项目计划
- **里程碑计划**：制定项目关键里程碑
- **迭代计划**：按迭代进行开发和交付
- **任务分解**：将需求分解为具体的开发任务
- **进度跟踪**：定期跟踪项目进度

### 7.2 团队协作
- **角色职责**：明确团队成员的角色和职责
- **沟通机制**：建立有效的沟通机制
- **知识共享**：定期进行技术分享和知识传递
- **问题解决**：建立快速的问题解决机制

### 7.3 质量保证
- **代码审查**：所有代码需要经过审查
- **质量度量**：建立代码质量度量体系
- **持续改进**：定期回顾和改进开发流程
- **文档维护**：及时更新项目文档

## 8. 安全规范

### 8.1 代码安全
- **输入验证**：所有用户输入需要进行验证
- **SQL注入防护**：使用参数化查询防止SQL注入
- **XSS防护**：对输出内容进行转义防止XSS攻击
- **敏感信息保护**：敏感信息需要加密存储

### 8.2 接口安全
- **身份认证**：使用JWT进行身份认证
- **权限控制**：基于角色的访问控制
- **接口限流**：防止接口被恶意调用
- **HTTPS传输**：敏感数据使用HTTPS传输

### 8.3 数据安全
- **数据备份**：定期备份重要数据
- **数据加密**：敏感数据加密存储
- **访问控制**：严格控制数据库访问权限
- **审计日志**：记录关键操作的审计日志

## 9. 文档规范

### 9.1 文档类型
- **需求文档**：详细描述系统需求
- **设计文档**：包含架构设计和详细设计
- **接口文档**：详细描述API接口
- **用户手册**：指导用户使用系统
- **运维文档**：指导系统运维

### 9.2 文档规范
- **文档格式**：使用Markdown格式编写文档
- **版本控制**：文档需要进行版本控制
- **更新机制**：及时更新文档内容
- **审查机制**：重要文档需要经过审查

### 9.3 文档存储
- **集中存储**：所有文档集中存储在文档库中
- **权限控制**：根据角色设置文档访问权限
- **备份机制**：定期备份文档库
- **检索功能**：提供文档检索功能

---

文档版本：V1.0  
创建日期：2023年11月15日  
最后更新：2023年11月15日  
创建人：项目经理  
审核人：技术总监